function Myspot(){function a(a){setTimeout(function(){a&&"function"==typeof a&&a({data:"request-token"})},500)}return{add:function(b,c){a(function(){setTimeout(function(){c&&"function"==typeof c&&c()},500)})},remove:function(b,c){a(function(){setTimeout(function(){c&&"function"==typeof c&&c()},500)})}}}function Star(a,b,c){function d(a,b){return!!(h.minX<=a&&a<=h.maxX&&h.minY<=b&&b<=h.maxY)}function e(a){var b,c;return function(d){b=d,c&&(clearTimeout(c),delete c),c=setTimeout(b,a)}}if(a){a=$(a);var f=a.offset(),g={width:a.innerWidth(),height:a.innerHeight()},h={minX:f.left,maxX:f.left+g.width,minY:f.top,maxY:f.top+g.height},i=e(300);a.bind("touchstart",function(){$(this).addClass("on")}).bind("touchmove",function(){d(event.changedTouches[0].pageX,event.changedTouches[0].pageY)?$(this).addClass("on"):$(this).removeClass("on")}).bind("touchend",function(){if($(this).removeClass("on"),d(event.changedTouches[0].pageX,event.changedTouches[0].pageY)){var a=$($(this).find("i"));a.hasClass("fa-star-o")?(a.removeClass("fa-star-o").addClass("fa-star"),b&&"function"==typeof b&&i(b)):(a.removeClass("fa-star").addClass("fa-star-o"),c&&"function"==typeof c&&i(c))}}),this.elm=a}}Star.prototype={check:function(){},toggle:function(){},on:function(){},off:function(){}};var requestQue=function(){var a=[],b=0,c=!1,d=null;return{subscribe:function(a){d=a},notice:function(){d&&"function"==typeof d&&d({currentQueLength:this.count(),maxCount:b})},count:function(){return a.length},lock:function(a){return(a===!0||a===!1)&&(c=a),c},addMyspot:function(c,d){var e=this;return b+=1,a.push(function(){Myspot().add(c,function(){e.lock(!1),e.notice(),d&&"function"==typeof d&&d(),e.next()})}),this.notice(),this.lock()!==!0&&this.next(),this},removeMyspot:function(c,d){var e=this;return b+=1,a.push(function(){Myspot().remove(c,function(){e.lock(!1),e.notice(),d&&"function"==typeof d&&d(),e.next()})}),this.notice(),this.lock()!==!0&&this.next(),this},next:function(){if(console.log("[NEXT]",this.lock()),this.lock()!==!0){this.lock(!0);var b=a.shift();return b&&"function"==typeof b?b():(this.clear(),this.notice()),this}},clear:function(){return a=[],this.lock(!1),b=0,this}}}();